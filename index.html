<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <title>Wardin perhe - Census 1900</title>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; margin: 0; overflow: hidden; display: flex; flex-direction: column; height: 100vh; }
        #viewer { position: relative; flex-grow: 1; overflow: hidden; background: #000; }
        #census-img { position: absolute; width: 100%; transition: all 0.6s ease; top: 0; left: 0; }
        #overlay { position: absolute; width: 100%; height: 100%; pointer-events: none; box-shadow: inset 0 0 0 9999px rgba(0,0,0,0.7); display: none; z-index: 10; }
        #spotlight { position: absolute; border: 3px solid #ee7203; box-shadow: 0 0 15px #ee7203; display: none; z-index: 11; }
        #controls { background: #2c2c2c; padding: 20px; z-index: 20; border-top: 2px solid #444; min-height: 120px; }
        button { padding: 12px 24px; background: #ee7203; border: none; color: white; font-weight: bold; cursor: pointer; border-radius: 4px; margin-right: 10px; }
        button:disabled { background: #555; cursor: not-allowed; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div id="viewer">
        <img id="census-img" src="frank_ward_1900.jpg">
        <div id="overlay"></div>
        <div id="spotlight"></div>
    </div>
    <div id="controls">
        <div id="intro">
            <h2 style="margin:0 0 10px 0;">Frank Wardin perhe - McDavitt, MN (1900)</h2>
            <p>Tutki alkuperäistä väestönlaskenta-arkkia. Käytä ohjattua tutkimusta nähdäksesi tulkinnat.</p>
            <button onclick="startGuide()">Aloita ohjattu tutkiminen</button>
        </div>
        <div id="guide" class="hidden">
            <h3 id="step-title" style="margin:0; color:#ee7203;"></h3>
            <p id="step-text" style="margin:10px 0; font-size: 1.1em;"></p>
            <button id="prevBtn" onclick="changeStep(-1)">Edellinen</button>
            <button id="nextBtn" onclick="changeStep(1)">Seuraava</button>
            <button onclick="resetView()" style="background:#555;">Palaa koko kuvaan</button>
        </div>
    </div>
<script>
    /*
    const steps = [
        {"title":"Väestönlaskennan tiedot","text":"Yhdysvaltain 12. liittovaltion väestönlaskenta, kesäkuu 1900.","x":10,"y":3,"w":80,"h":8},
        {"title":"ED / Sivu","text":"Enumeration District 259, Sivu 18A.","x":70.9,"y":8.1,"w":24,"h":1.9},
        {"title":"Frank Ward (Päämies)","text":"S. 1/1869 Suomi. 31v. USA:han 1886. Na (Kansalaistettu). Maanviljelijä.","x":10.5,"y":62.2,"w":85,"h":1.5},
        {"title":"Siza Ward (Vaimo)","text":"S. 5/1864 Suomi. 36v. 6 lasta elossa. USA:han 1887. Ei puhu englantia.","x":10.5,"y":63.7,"w":85,"h":1.5},
        {"title":"Lapset","text":"Suti (8v), Hilda (7v), Arthur (6v), Oscar (4v), Victor (2v) ja Sandra (11kk). Kaikki s. Minnesotassa.","x":10.5,"y":65.2,"w":25,"h":9}
    ];
    */changeStep
const steps = [
    {"title":"Sarake 3: Nimi","text":"Alkuperäinen: 'Ward Frank' (Päämies).","x":10.5,"y":62.1,"w":11,"h":1.5},
    {"title":"Sarake 7: Syntymäaika","text":"Alkuperäinen: 'Jan 1869' (Tammikuu 1869).","x":31,"y":62.1,"w":4,"h":1.5},
    {"title":"Sarake 8: Ikä","text":"Alkuperäinen: '31' vuotta.","x":35,"y":62.1,"w":2,"h":1.5},
    {"title":"Sarake 13: Syntymäpaikka","text":"Alkuperäinen: 'Finland' (Suomi).","x":47,"y":62.1,"w":5,"h":1.5},
    {"title":"Sarake 16: Maahanmuuttovuosi","text":"Alkuperäinen: '1886'.","x":62,"y":62.1,"w":3,"h":1.5},
    {"title":"Sarake 18: Kansalaisuus","text":"Alkuperäinen: 'Na' (Naturalized / Kansalaistettu).","x":67.5,"y":62.1,"w":2.5,"h":1.5},
    {"title":"Sarake 19: Ammatti","text":"Alkuperäinen: 'Farmer' (Maanviljelijä).","x":70.5,"y":62.1,"w":10,"h":1.5}
];
    let currentStep = 0;

    function startGuide() {
        document.getElementById('intro').classList.add('hidden');
        document.getElementById('guide').classList.remove('hidden');
        document.getElementById('overlay').style.display = 'block';
        document.getElementById('spotlight').style.display = 'block';
        updateUI();
    }

    function resetView() {
        document.getElementById('intro').classList.remove('hidden');
        document.getElementById('guide').classList.add('hidden');
        document.getElementById('overlay').style.display = 'none';
        document.getElementById('spotlight').style.display = 'none';
        const img = document.getElementById('census-img');
        img.style.width = "100%"; img.style.left = "0"; img.style.top = "0";
    }

    function updateUI() {
        const s = steps[currentStep];
        document.getElementById('step-title').innerText = s.title;
        document.getElementById('step-text').innerText = s.text;
        const zoom = 2.8; const container = document.getElementById('viewer');
        const img = document.getElementById('census-img');
        img.style.width = (zoom * 100) + "%";
        const targetX = (s.x + s.w/2) / 100 * img.offsetWidth;
        const targetY = (s.y + s.h/2) / 100 * img.offsetHeight;
        img.style.left = (container.offsetWidth/2 - targetX) + "px";
        img.style.top = (container.offsetHeight/2 - targetY) + "px";
        const spot = document.getElementById('spotlight');
        spot.style.width = (s.w/100*img.offsetWidth) + "px";
        spot.style.height = (s.h/100*img.offsetHeight) + "px";
        spot.style.left = (container.offsetWidth/2 - (s.w/100*img.offsetWidth)/2) + "px";
        spot.style.top = (container.offsetHeight/2 - (s.h/100*img.offsetHeight)/2) + "px";
        document.getElementById('prevBtn').disabled = currentStep === 0;
        document.getElementById('nextBtn').disabled = currentStep === steps.length - 1;
    }

    function changeStep(dir) {
        currentStep = Math.max(0, Math.min(steps.length - 1, currentStep + dir));
        updateUI();
    }
</script>
</body>
</html>